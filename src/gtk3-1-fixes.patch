This file is part of MXE. See LICENSE.md for licensing information.

Contains ad hoc patches for cross building.

From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Boris Nagaev <bnagaev@gmail.com>
Date: Sun, 29 Jan 2017 21:47:39 +0100
Subject: [PATCH] These were adapted from the gtk2 patchset.

diff --git a/gdk/win32/gdkmain-win32.c b/gdk/win32/gdkmain-win32.c
index 1111111..2222222 100644
--- a/gdk/win32/gdkmain-win32.c
+++ b/gdk/win32/gdkmain-win32.c
@@ -64,7 +64,7 @@ const GOptionEntry _gdk_windowing_args[] = {
 };
 
 BOOL WINAPI
-DllMain (HINSTANCE hinstDLL,
+gdk_DllMain (HINSTANCE hinstDLL,
 	 DWORD     dwReason,
 	 LPVOID    reserved)
 {
diff --git a/gtk+-3.0.pc.in b/gtk+-3.0.pc.in
index 1111111..2222222 100644
--- a/gtk+-3.0.pc.in
+++ b/gtk+-3.0.pc.in
@@ -12,5 +12,5 @@ Description: GTK+ Graphical UI Library
 Version: @VERSION@
 Requires: gdk-@GTK_API_VERSION@ @GTK_PACKAGES@
 Requires.private: @GTK_PRIVATE_PACKAGES@
-Libs: -L${libdir} -lgtk-3 @GTK_EXTRA_LIBS@
+Libs: -L${libdir} -lgtk-3 @GTK_DEP_LIBS@ -lwinspool -lcomctl32 -lcomdlg32
 Cflags: -I${includedir}/gtk-@GTK_API_VERSION@ @GTK_EXTRA_CFLAGS@
diff --git a/gtk/gtkwin32.c b/gtk/gtkwin32.c
index 1111111..2222222 100644
--- a/gtk/gtkwin32.c
+++ b/gtk/gtkwin32.c
@@ -42,7 +42,7 @@
 static HMODULE gtk_dll;
 
 BOOL WINAPI
-DllMain (HINSTANCE hinstDLL,
+gtk_DllMain (HINSTANCE hinstDLL,
          DWORD     fdwReason,
          LPVOID    lpvReserved)
 {

From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Boris Nagaev <bnagaev@gmail.com>
Date: Sun, 29 Jan 2017 21:50:48 +0100
Subject: [PATCH] Not sure what happens when this line is commented out


diff --git a/gtk/a11y/gtkaccessibility.c b/gtk/a11y/gtkaccessibility.c
index 1111111..2222222 100644
--- a/gtk/a11y/gtkaccessibility.c
+++ b/gtk/a11y/gtkaccessibility.c
@@ -992,5 +992,5 @@ _gtk_accessibility_init (void)
   atk_bridge_adaptor_init (NULL, NULL);
 #endif
 
-  atk_misc_instance = g_object_new (GTK_TYPE_MISC_IMPL, NULL);
+  /* atk_misc_instance = g_object_new (GTK_TYPE_MISC_IMPL, NULL); */
 }

From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Boris Nagaev <bnagaev@gmail.com>
Date: Sun, 29 Jan 2017 22:50:45 +0100
Subject: [PATCH] disable gtk-update-icon-cache

The error: https://gist.github.com/b3030a43a325ee7646a2bda2864465b5

diff --git a/demos/gtk-demo/Makefile.in b/demos/gtk-demo/Makefile.in
index 1111111..2222222 100644
--- a/demos/gtk-demo/Makefile.in
+++ b/demos/gtk-demo/Makefile.in
@@ -1422,7 +1422,6 @@ uninstall-hook: uninstall-update-icon-cache
 
 install-update-icon-cache:
 	$(AM_V_at)$(POST_INSTALL)
-	test -n "$(DESTDIR)" || $(update_icon_cache) "$(iconthemedir)"
 
 uninstall-update-icon-cache:
 	$(AM_V_at)$(POST_UNINSTALL)
diff --git a/demos/widget-factory/Makefile.in b/demos/widget-factory/Makefile.in
index 1111111..2222222 100644
--- a/demos/widget-factory/Makefile.in
+++ b/demos/widget-factory/Makefile.in
@@ -1161,7 +1161,6 @@ uninstall-hook: uninstall-update-icon-cache
 
 install-update-icon-cache:
 	$(AM_V_at)$(POST_INSTALL)
-	test -n "$(DESTDIR)" || $(update_icon_cache) "$(iconthemedir)"
 
 uninstall-update-icon-cache:
 	$(AM_V_at)$(POST_UNINSTALL)

--- a/gtk/gtksettingsprivate.h	2016-12-30 14:55:56.000000000 +0000
+++ b/gtk/gtksettingsprivate.h	2017-02-11 01:54:58.851275514 +0000
@@ -23,7 +23,7 @@
 
 G_BEGIN_DECLS
 
-#define DEFAULT_THEME_NAME      "Adwaita"
+ #define DEFAULT_THEME_NAME      "Windows10" //"win32" or "Adwaita"
 #define DEFAULT_ICON_THEME      "Adwaita"
 
 void                _gtk_settings_set_property_value_from_rc (GtkSettings            *settings,


diff -u a/gtk/gtkspinbutton.c b/gtk/gtkspinbutton.c
--- a/gtk/gtkspinbutton.c       2018-03-28 02:15:44.000000000 +0200
+++ b/gtk/gtkspinbutton.c       2018-11-26 17:29:58.613360237 +0100
@@ -812,7 +812,7 @@
   priv->down_button = gtk_icon_helper_new_named ("button",
                                                  GTK_WIDGET (spin_button));
   _gtk_icon_helper_set_use_fallback (GTK_ICON_HELPER (priv->down_button), TRUE);
-  _gtk_icon_helper_set_icon_name (GTK_ICON_HELPER (priv->down_button), "list-remove-symbolic", GTK_ICON_SIZE_MENU);
+  _gtk_icon_helper_set_icon_name (GTK_ICON_HELPER (priv->down_button), "list-remove-symbolic", GTK_ICON_SIZE_MENU); //NULL
   gtk_css_gadget_add_class (priv->down_button, "down");
   gtk_css_node_set_parent (gtk_css_gadget_get_node (priv->down_button), widget_node);
   gtk_css_node_set_state (gtk_css_gadget_get_node (priv->down_button), gtk_css_node_get_state (widget_node));
@@ -823,7 +823,7 @@
   priv->up_button = gtk_icon_helper_new_named ("button",
                                                GTK_WIDGET (spin_button));
   _gtk_icon_helper_set_use_fallback (GTK_ICON_HELPER (priv->up_button), TRUE);
-  _gtk_icon_helper_set_icon_name (GTK_ICON_HELPER (priv->up_button), "list-add-symbolic", GTK_ICON_SIZE_MENU);
+  _gtk_icon_helper_set_icon_name (GTK_ICON_HELPER (priv->up_button), "list-add-symbolic", GTK_ICON_SIZE_MENU); //NULL
   gtk_css_gadget_add_class (priv->up_button, "up");
   gtk_css_node_set_parent (gtk_css_gadget_get_node (priv->up_button), widget_node);
   gtk_css_node_set_state (gtk_css_gadget_get_node (priv->up_button), gtk_css_node_get_state (widget_node));

--- a/gtk/theme/win32/gtk.css	2016-10-22 06:17:35.000000000 +0200
+++ b/gtk/theme/win32/gtk.css	2020-03-10 14:25:35.832275351 +0100
@@ -1,4 +1,5 @@
 @import url("gtk-win32-base.css");
+@import url("mednaffe.css");
 
 /* Menus */